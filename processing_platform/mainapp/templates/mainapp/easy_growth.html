{% extends "mainapp/base.html" %}

{% block title %}Flight Details{% endblock %}

{% block content %}
  <h2 class="text-2xl font-semibold mb-4">Last opp sensor-data</h2>

  {% if messages %}
    {% for message in messages %}
      <p class="text-{{ message.tags }}">{{ message }}</p>
    {% endfor %}
  {% endif %}

  <form method="post" enctype="multipart/form-data">
  {% csrf_token %}

  <label>Velg kilde:</label><br>
  <input type="radio" name="source" value="files" checked onchange="toggleSource()"> Last opp enkeltfiler<br>
  <input type="radio" name="source" value="folder" onchange="toggleSource()"> Last opp mappe<br><br>

  <div id="file-input">
    <label>Velg filer:</label>
    <input type="file" name="files" multiple>
  </div>

  <div id="folder-input" style="display:none;">
    <label>Velg mappe:</label>
    <input type="file" name="folder_files" webkitdirectory directory multiple>
  </div>

  <br>
  <button type="submit">Last opp</button>
</form>

<script>
  function toggleSource() {
    const source = document.querySelector('input[name="source"]:checked').value;
    document.getElementById("file-input").style.display = (source === "files") ? "block" : "none";
    document.getElementById("folder-input").style.display = (source === "folder") ? "block" : "none";
  }
  document.addEventListener("DOMContentLoaded", toggleSource);
</script>

  <script>
    function toggleFileInput() {
      const value = document.querySelector('input[name="source"]:checked').value;
      document.getElementById('file-input').style.display = (value === 'files') ? 'block' : 'none';
    }

    // Sørg for riktig visning når siden lastes
    document.addEventListener("DOMContentLoaded", toggleFileInput);
  </script>
{% endblock %}